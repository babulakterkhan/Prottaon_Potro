<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>BCTI - ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶è‡¶°‡¶ø‡¶∂‡¶®</title>
    <style>
        :root { --primary: #004d40; --accent: #00695c; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #eaeff2; margin: 0; padding: 0; display: flex; height: 100vh; overflow: hidden; }
        
        .input-panel { width: 380px; background: #fff; box-shadow: 2px 0 10px rgba(0,0,0,0.1); overflow-y: auto; border-right: 3px solid var(--primary); display: flex; flex-direction: column; }
        .panel-header { background: var(--primary); color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
        .panel-header h2 { margin: 0; font-size: 18px; }
        .panel-section { padding: 20px; flex: 1; }
        .section-title { color: var(--primary); font-size: 15px; border-bottom: 1px solid #ddd; padding-bottom: 5px; margin: 15px 0 10px 0; font-weight: bold; text-transform: uppercase; }

        #masterSettings { display: none; background: #f0f4f3; border-bottom: 5px solid #ddd; padding: 20px; border-left: 5px solid var(--primary); }
        .input-group { margin-bottom: 12px; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 4px; font-size: 13px; color: #555; }
        .input-group input, .input-group select, .input-group textarea { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-family: inherit; font-size: 14px; }

        .backup-tools { display: flex; gap: 8px; margin-top: 15px; border-top: 1px solid #ccc; padding-top: 15px; }
        .btn-sm { flex: 1; padding: 8px; font-size: 12px; cursor: pointer; border-radius: 4px; border: 1px solid #999; background: #fff; font-weight: bold; text-align: center; }

        .preview-panel { flex: 1; background: #525659; display: flex; justify-content: center; align-items: flex-start; padding: 30px; overflow-y: auto; }
        .certificate { width: 210mm; min-height: 297mm; background: white; box-shadow: 0 0 20px rgba(0,0,0,0.4); box-sizing: border-box; position: relative; }
        
        .pad-mode-on .header-area { display: none !important; }

        .header-area { display: grid; grid-template-columns: 100px 1fr 100px; align-items: center; border-bottom: 3px solid var(--primary); margin-bottom: 45px; padding-bottom: 20px; }
        .logo-box { width: 90px; height: 90px; display: flex; align-items: center; justify-content: center; }
        .logo-box img { max-width: 100%; max-height: 90px; object-fit: contain; }
        
        .header-text { text-align: center; }
        .header-text h1 { margin: 0; font-size: 28px; font-weight: bold; color: var(--primary); }
        .estd-text { font-size: 14px; margin: 2px 0; color: #444; font-weight: bold; display: block; }
        .header-text p { margin: 5px 0 2px; font-size: 15px; color: #333; }
        
        .contact-info { display: flex; flex-direction: column; align-items: center; gap: 2px; margin-top: 5px; }
        .contact-info span { font-size: 13px; color: var(--accent); font-weight: 500; }

        .title { text-align: center; margin: 40px 0; }
        .title span { font-size: 26px; font-weight: bold; color: #fff; background: var(--primary); padding: 5px 35px; border-radius: 50px; }

        .content { font-size: 20px; line-height: 2.2; text-align: justify; color: #000; }
        .data-text { font-weight: normal; color: #000; border-bottom: 1px dotted #999; }

        .footer { margin-top: 80px; display: flex; justify-content: space-between; align-items: flex-end; }
        .sign-box { text-align: center; width: 220px; border-top: none; padding-top: 5px; font-weight: bold; color: var(--primary); }

        .btn { padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; width: 100%; }
        .btn-settings { background: #555; padding: 6px 12px; font-size: 12px; width: auto; }
        .btn-print { background: var(--primary); margin-top: 10px; font-size: 16px; }

        @media print {
            .input-panel { display: none !important; }
            .preview-panel { padding: 0; background: white; }
            .certificate { box-shadow: none; border: none; width: 210mm; height: 297mm; margin: 0; }
            .data-text { border-bottom: none !important; }
            .title span { background: var(--primary) !important; color: white !important; -webkit-print-color-adjust: exact; }
            .header-text h1 { color: var(--primary) !important; -webkit-print-color-adjust: exact; }
            @page { size: portrait; margin: 0; }
        }
    </style>
</head>
<body onload="autoLoad()">

<div class="input-panel">
    <div class="panel-header">
        <h2>BCTI ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</h2>
        <button class="btn btn-settings" onclick="checkPass()">‚öôÔ∏è ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</button>
    </div>

    <div id="masterSettings">
        <div class="section-title">‚öôÔ∏è ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</div>
        <div class="input-group"><label>üîí ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°</label><input type="password" id="setPass" onblur="save()"></div>
        <hr>
        <div class="input-group"><label>‡¶≤‡ßã‡¶ó‡ßã ‡¶Ü‡¶™‡¶≤‡ßã‡¶°</label><input type="file" accept="image/*" onchange="updateLogo(this)"></div>
        <div class="input-group"><label>‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label><input type="text" id="inShop" oninput="sync()"></div>
        <div class="input-group"><label>‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶ø‡¶§ (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶ø‡¶§: ‡ß®‡ß¶‡ß¶‡ß´ ‡¶á‡¶Ç)</label><input type="text" id="inEstd" oninput="sync()"></div>
        <div class="input-group"><label>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶ì ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤</label><textarea id="inAddr" rows="1" oninput="sync()"></textarea></div>
        <div style="display: flex; gap: 8px;">
            <div class="input-group" style="flex:1;"><label>‡¶á‡¶Æ‡ßá‡¶á‡¶≤</label><input type="text" id="inEmail" oninput="sync()"></div>
            <div class="input-group" style="flex:1;"><label>‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü</label><input type="text" id="inWeb" oninput="sync()"></div>
        </div>

        <div class="section-title">üìè ‡¶´‡¶®‡ßç‡¶ü ‡¶ì ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</div>
        <div style="display: flex; gap: 8px;">
            <div class="input-group" style="flex:1;"><label>‡¶Æ‡ßÇ‡¶≤ ‡¶´‡¶®‡ßç‡¶ü</label><input type="number" id="setFontSize" value="20" oninput="sync()"></div>
            <div class="input-group" style="flex:1;"><label>‡¶≤‡¶æ‡¶á‡¶® ‡¶ó‡ßç‡¶Ø‡¶æ‡¶™</label><input type="number" step="0.1" id="setLineHeight" value="2.2" oninput="sync()"></div>
            <div class="input-group" style="flex:1;"><label>‡¶∏‡ßç‡¶¨‡¶æ‡¶ï‡ßç‡¶∑‡¶∞ ‡¶´‡¶®‡ßç‡¶ü</label><input type="number" id="setSignSize" value="18" oninput="sync()"></div>
        </div>
        <div style="display: flex; gap: 5px;">
            <div class="input-group" style="flex:1;"><label>‡¶â‡¶™‡¶∞</label><input type="number" id="mTop" value="100" oninput="sync()"></div>
            <div class="input-group" style="flex:1;"><label>‡¶®‡¶ø‡¶ö</label><input type="number" id="mBottom" value="50" oninput="sync()"></div>
            <div class="input-group" style="flex:1;"><label>‡¶¨‡¶æ‡¶Æ</label><input type="number" id="mLeft" value="75" oninput="sync()"></div>
            <div class="input-group" style="flex:1;"><label>‡¶°‡¶æ‡¶®</label><input type="number" id="mRight" value="75" oninput="sync()"></div>
        </div>

        <div class="section-title">üìù ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</div>
        <div class="input-group"><label>‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ (‡¶ï‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá)</label><input type="text" id="setUpz" onblur="updateMasterLists()"></div>
        <div class="input-group"><label>‡¶ú‡ßá‡¶≤‡¶æ (‡¶ï‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá)</label><input type="text" id="setDist" onblur="updateMasterLists()"></div>
        <div class="input-group"><label>‡¶∏‡ßá‡¶∂‡¶® (‡¶ï‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá)</label><input type="text" id="setSession" onblur="updateMasterLists()"></div>
        <div class="input-group"><label>‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó (‡¶ï‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá)</label><input type="text" id="setDept" onblur="updateMasterLists()"></div>
        <div class="input-group"><label>‡¶∏‡ßç‡¶¨‡¶æ‡¶ï‡ßç‡¶∑‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶™‡¶¶‡¶¨‡ßÄ</label><input type="text" id="inSign" oninput="sync()"></div>

        <div class="backup-tools">
            <button class="btn-sm" onclick="exportJSON()">üì• ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™</button>
            <button class="btn-sm" onclick="document.getElementById('importFile').click()">üì§ ‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞</button>
            <input type="file" id="importFile" style="display:none" accept=".json" onchange="importJSON(this)">
        </div>
        <button class="btn" style="background:#777; font-size:12px; margin-top:15px;" onclick="toggleSettings()">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>

    <div class="panel-section">
        <div class="section-title">üë§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</div>
        <div class="input-group"><label>‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ</label><input type="text" id="inName" oninput="sync()"></div>
        <div style="display: flex; gap: 8px;">
            <div class="input-group" style="flex:1;"><label>‡¶™‡¶ø‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ</label><input type="text" id="inFather" oninput="sync()"></div>
            <div class="input-group" style="flex:1;"><label>‡¶Æ‡¶æ‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ</label><input type="text" id="inMother" oninput="sync()"></div>
        </div>
        <div class="input-group"><label>‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ/‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label><input type="text" id="inVill" oninput="sync()"></div>
        <div style="display: flex; gap: 8px;">
            <div class="input-group" style="flex:1;"><label>‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ</label><select id="inUpz" onchange="sync()"></select></div>
            <div class="input-group" style="flex:1;"><label>‡¶ú‡ßá‡¶≤‡¶æ</label><select id="inDist" onchange="sync()"></select></div>
        </div>
        <div style="display: flex; gap: 8px;">
            <div class="input-group" style="flex:1;"><label>‡¶∏‡ßá‡¶∂‡¶®</label><select id="inSession" onchange="sync()"></select></div>
            <div class="input-group" style="flex:1;"><label>‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó</label><select id="inDept" onchange="sync()"></select></div>
        </div>
        <div style="display: flex; gap: 8px;">
            <div class="input-group" style="flex:1;"><label>‡¶∞‡ßã‡¶≤</label><input type="text" id="inRoll" oninput="sync()"></div>
            <div class="input-group" style="flex:1;"><label>‡¶ú‡¶®‡ßç‡¶Æ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label><input type="text" id="inDOB" oninput="sync()"></div>
        </div>
        <div style="margin: 15px 0;"><label style="cursor:pointer; font-weight: bold; color: #d32f2f;"><input type="checkbox" id="padMode" onchange="sync()"> ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡ßá ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü (‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®)</label></div>
        <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
</div>

<div class="preview-panel">
    <div id="certArea" class="certificate">
        <div class="header-area">
            <div class="logo-box"><img id="certLogo" src="https://via.placeholder.com/90?text=LOGO"></div>
            <div class="header-text">
                <h1 id="outShop">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</h1>
                <span id="outEstd" class="estd-text"></span>
                <p id="outAddr">‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶ì ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</p>
                <div class="contact-info">
                    <span id="outEmail"></span>
                    <span id="outWeb"></span>
                </div>
            </div>
            <div style="width:90px;"></div>
        </div>
        <div class="title"><span>‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡ßü‡¶® ‡¶™‡¶§‡ßç‡¶∞</span></div>
        <div id="mainContent" class="content">
            ‡¶è‡¶á ‡¶Æ‡¶∞‡ßç‡¶Æ‡ßá ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡ßü‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‡¶Ø‡ßá, <span id="outName" class="data-text">..............</span>, ‡¶™‡¶ø‡¶§‡¶æ- <span id="outFather" class="data-text">..............</span>, ‡¶Æ‡¶æ‡¶§‡¶æ- <span id="outMother" class="data-text">..............</span>, ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ- <span id="outVill" class="data-text">..............</span>, ‡¶°‡¶æ‡¶ï‡¶ò‡¶∞- ‡¶∂‡¶æ‡¶π‡¶ú‡¶æ‡¶¶‡¶™‡ßÅ‡¶∞, ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ- <span id="outUpz" class="data-text">..............</span>, ‡¶ú‡ßá‡¶≤‡¶æ- <span id="outDist" class="data-text">..............</span>‡•§ ‡¶∏‡ßá ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá‡¶∞ <span id="outSession" class="data-text">..............</span> ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶¨‡¶∞‡ßç‡¶∑‡ßá‡¶∞ <span id="outDept" class="data-text">..............</span> ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó‡ßá‡¶∞ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡ßÄ‡¶∞ ‡¶è‡¶ï‡¶ú‡¶® ‡¶®‡¶ø‡ßü‡¶Æ‡¶ø‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡•§ ‡¶§‡¶æ‡¶∞ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∞‡ßã‡¶≤- <span id="outRoll" class="data-text">.........</span>‡•§ ‡¶ú‡¶®‡ßç‡¶Æ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ- <span id="outDOB" class="data-text">..................</span> ‡¶ñ‡ßç‡¶∞‡¶ø.‡•§ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶æ‡¶®‡¶æ‡¶Æ‡¶§‡ßá ‡¶§‡¶æ‡¶∞ ‡¶∏‡ßç‡¶¨‡¶≠‡¶æ‡¶¨ ‡¶ö‡¶∞‡¶ø‡¶§‡ßç‡¶∞ ‡¶≠‡¶æ‡¶≤‡ßã ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßá ‡¶ï‡¶ñ‡¶®‡¶ì ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá‡¶∞ ‡¶∂‡ßÉ‡¶ô‡ßç‡¶ñ‡¶≤‡¶æ ‡¶¨‡¶ø‡¶∞‡ßã‡¶ß‡ßÄ ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡ßç‡¶∞‡¶Æ‡ßá ‡¶Ö‡¶Ç‡¶∂‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡ßá‡¶®‡¶ø‡•§ <br><br>‡¶Ü‡¶Æ‡¶ø ‡¶§‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá‡¶∞ ‡¶∏‡¶∞‡ßç‡¶¨‡¶æ‡¶ô‡ßç‡¶ó‡ßÄ‡¶® ‡¶â‡¶®‡ßç‡¶®‡¶§‡¶ø ‡¶ì ‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤ ‡¶ï‡¶æ‡¶Æ‡¶®‡¶æ ‡¶ï‡¶∞‡¶ø‡•§
        </div>
        <div class="footer">
            <div id="outDate">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: </div>
            <div id="outSign" class="sign-box">‡¶Ö‡¶ß‡ßç‡¶Ø‡¶ï‡ßç‡¶∑/‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶ï</div>
        </div>
    </div>
</div>

<script>
    const KEY = 'bcti_bangla_date_v28';
    let savedPass = "";

    // ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡ßü ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞
    function toBengaliNumber(n) {
        const banglaDigits = {'0':'‡ß¶','1':'‡ßß','2':'‡ß®','3':'‡ß©','4':'‡ß™','5':'‡ß´','6':'‡ß¨','7':'‡ß≠','8':'‡ßÆ','9':'‡ßØ'};
        return n.toString().split('').map(digit => banglaDigits[digit] || digit).join('');
    }

    // ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
    function setTodayDateBengali() {
        const today = new Date();
        const d = String(today.getDate()).padStart(2, '0');
        const m = String(today.getMonth() + 1).padStart(2, '0');
        const y = today.getFullYear();
        
        const dateStr = `${toBengaliNumber(d)}/${toBengaliNumber(m)}/${toBengaliNumber(y)} ‡¶ñ‡ßç‡¶∞‡¶ø.`;
        document.getElementById('outDate').innerText = `‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ${dateStr}`;
    }

    function toggleSettings() { 
        const ms = document.getElementById('masterSettings'); 
        ms.style.display = (ms.style.display === 'block') ? 'none' : 'block'; 
    }

    function checkPass() {
        if (!savedPass) { toggleSettings(); return; }
        const input = prompt("‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®:");
        if (input === savedPass) toggleSettings();
        else if (input !== null) alert("‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°!");
    }

    function updateMasterLists() {
        ['Upz', 'Dist', 'Session', 'Dept'].forEach(type => {
            const listEl = document.getElementById('set' + type);
            if(listEl) {
                const selectEl = document.getElementById('in' + type);
                selectEl.innerHTML = listEl.value.split(',').map(i => `<option value="${i.trim()}">${i.trim()}</option>`).join('');
            }
        });
        sync();
    }

    function sync() {
        ['Shop', 'Estd', 'Addr', 'Email', 'Web', 'Sign', 'Name', 'Father', 'Mother', 'Vill', 'Upz', 'Dist', 'Session', 'Dept', 'Roll', 'DOB'].forEach(id => {
            const val = (document.getElementById('in' + id) || {}).value || "";
            const out = document.getElementById('out' + id);
            if(out) {
                if(id === 'Sign') out.innerText = val || "‡¶Ö‡¶ß‡ßç‡¶Ø‡¶ï‡ßç‡¶∑/‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶ï";
                else if(id === 'Estd') out.innerText = val || "";
                else if(id === 'Email') out.innerText = val ? "Email: " + val : "";
                else if(id === 'Web') out.innerText = val ? "Website: " + val : "";
                else out.innerText = val || "..............";
            }
        });

        document.getElementById('mainContent').style.fontSize = document.getElementById('setFontSize').value + 'px';
        document.getElementById('mainContent').style.lineHeight = document.getElementById('setLineHeight').value;
        document.getElementById('outSign').style.fontSize = document.getElementById('setSignSize').value + 'px';

        const cert = document.getElementById('certArea');
        cert.style.padding = `${document.getElementById('mTop').value}px ${document.getElementById('mRight').value}px ${document.getElementById('mBottom').value}px ${document.getElementById('mLeft').value}px`;
        cert.classList.toggle('pad-mode-on', document.getElementById('padMode').checked);
        save();
    }

    function updateLogo(input) {
        if (input.files && input.files[0]) {
            const r = new FileReader(); r.onload = (e) => { document.getElementById('certLogo').src = e.target.result; save(); }; r.readAsDataURL(input.files[0]);
        }
    }

    function exportJSON() {
        const data = localStorage.getItem(KEY);
        if(!data) return alert("‡¶ï‡ßã‡¶®‡ßã ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡ßá‡¶á!");
        const a = document.createElement('a');
        a.href = URL.createObjectURL(new Blob([data], {type: "application/json"}));
        a.download = `BCTI_Backup.json`; a.click();
    }

    function importJSON(input) {
        const reader = new FileReader();
        reader.onload = (e) => { localStorage.setItem(KEY, e.target.result); location.reload(); };
        reader.readAsText(input.files[0]);
    }

    function save() {
        const d = {};
        const fields = ['Shop','Estd','Addr','Email','Web','Sign','Name','Father','Mother','Vill','Upz','Dist','Session','Dept','Roll','DOB','setUpz','setDist','setSession','setDept','setFontSize','setLineHeight','setSignSize','mTop','mBottom','mLeft','mRight','setPass'];
        fields.forEach(f => {
            const el = document.getElementById(f) || document.getElementById('in'+f);
            if(el) d[f] = el.value;
        });
        d.logo = document.getElementById('certLogo').src;
        d.pad = document.getElementById('padMode').checked;
        localStorage.setItem(KEY, JSON.stringify(d));
    }

    function autoLoad() {
        const s = localStorage.getItem(KEY);
        if(s) {
            const d = JSON.parse(s);
            Object.keys(d).forEach(k => {
                const el = document.getElementById(k) || document.getElementById('in'+k);
                if(el && k !== 'logo' && k !== 'pad') el.value = d[k];
            });
            if(d.logo) document.getElementById('certLogo').src = d.logo;
            document.getElementById('padMode').checked = d.pad;
            savedPass = d.setPass || "";
        }
        setTodayDateBengali(); 
        updateMasterLists();
    }
</script>
</body>
</html>